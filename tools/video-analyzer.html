<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Video Analyzer - CreatorToolkit</title>
    <meta name="description" content="Analyze your YouTube video SEO score and get improvement tips instantly. Free local analysis for creators.">
    <link rel="stylesheet" href="/style.css?v=20260221">
    <link rel="icon" href="/assets/favicon.ico" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        .analyzer-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; align-items: start; }
        .thumbnail-preview-box { 
            width: 100%; aspect-ratio: 16/9; background: var(--bg-secondary); 
            border-radius: var(--radius-md); overflow: hidden; border: 1px solid var(--border-color);
            display: flex; align-items: center; justify-content: center; margin-bottom: 1.5rem;
        }
        .thumbnail-preview-box img { width: 100%; height: 100%; object-fit: cover; display: none; }
        .score-circle { width: 120px; height: 120px; border-radius: 50%; border: 8px solid var(--brand-red-soft); display: flex; align-items: center; justify-content: center; font-size: 2.5rem; font-weight: 800; color: var(--brand-red); margin: 0 auto 1.5rem; position: relative; }
        .item-score { display: flex; justify-content: space-between; margin-bottom: 0.75rem; font-weight: 600; }
        .tip-list { list-style: none; padding: 0; }
        .tip-list li { padding: 0.75rem; background: var(--bg-secondary); border-radius: 8px; margin-bottom: 0.5rem; font-size: 0.9rem; display: flex; gap: 0.75rem; align-items: flex-start; }
        .tip-list li::before { content: "üí°"; }
        @media (max-width: 968px) { .analyzer-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <creator-header></creator-header>

    <main style="padding: 5rem 0; background: var(--bg-secondary);">
        <div class="container">
            <div style="text-align: center; margin-bottom: 4rem;">
                <h1 style="font-size: 3rem; letter-spacing: -0.02em; margin-bottom: 1rem;">Video Analyzer</h1>
                <p style="color: var(--text-secondary); font-size: 1.1rem;">Professional SEO Audit & Content Coaching</p>
            </div>

            <div class="analyzer-grid">
                <!-- Input Section -->
                <div class="card-premium" style="padding: 2.5rem; background: var(--bg-primary); border: 1px solid var(--border-color); border-radius: var(--radius-lg);">
                    <div class="form-group" style="margin-bottom: 1.5rem;">
                        <label class="label-premium" style="display: block; font-weight: 700; margin-bottom: 0.5rem;">Target URL (Optional)</label>
                        <div style="display: flex; gap: 0.5rem;">
                            <input type="text" id="video-url" placeholder="https://www.youtube.com/watch?v=..." style="flex: 1;">
                            <button onclick="loadThumbnail()" class="btn-primary" style="height: 44px; padding: 0 1rem; margin: 0;">Load</button>
                        </div>
                    </div>

                    <div class="thumbnail-preview-box" id="thumb-box">
                        <span id="thumb-placeholder" style="color: var(--text-secondary); font-size: 0.9rem;">Thumbnail Preview</span>
                        <img id="thumb-img" alt="Thumbnail Preview">
                    </div>

                    <div class="form-group" style="margin-bottom: 1.5rem;">
                        <label class="label-premium" style="display: block; font-weight: 700; margin-bottom: 0.5rem;">Target Title</label>
                        <textarea id="video-title" placeholder="Enter your title..." style="height: 80px;"></textarea>
                    </div>

                    <div class="form-group" style="margin-bottom: 1.5rem;">
                        <label class="label-premium" style="display: block; font-weight: 700; margin-bottom: 0.5rem;">Video Description</label>
                        <textarea id="video-desc" placeholder="Enter description..." style="height: 120px;"></textarea>
                    </div>

                    <div class="form-group" style="margin-bottom: 2rem;">
                        <label class="label-premium" style="display: block; font-weight: 700; margin-bottom: 0.5rem;">Target Keywords</label>
                        <input type="text" id="target-keywords" placeholder="keyword1, keyword2">
                    </div>

                    <button onclick="handleAnalysis()" class="btn-primary" style="width: 100%; height: 52px; font-size: 1.1rem; margin: 0;">Perform AI Audit ‚ú®</button>
                </div>

                <!-- AI Result Section -->
                <div id="ai-analysis-root">
                    <div style="text-align: center; padding: 5rem 0; color: var(--text-secondary); opacity: 0.5;">
                        <span style="font-size: 3rem; display: block; margin-bottom: 1rem;">üõ°Ô∏è</span>
                        <h3>Ready for deep scan</h3>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <creator-footer></creator-footer>

    <script src="/assets/js/aiEngine.js?v=20260221"></script>
    <script src="/main.js?v=20260221"></script>
    <script>
        function handleAnalysis() {
            const title = document.getElementById('video-title').value.trim();
            const kwRaw = document.getElementById('target-keywords').value;
            const kws = kwRaw.split(',').map(k => k.trim()).filter(k => k.length > 0);

            if (!title) return alert('Enter a title to analyze');

            const root = document.getElementById('ai-analysis-root');
            root.innerHTML = `
                <div class="ai-panel fade-in-up">
                    <div class="ai-header">
                        <h3 style="margin:0;">AI Audit Report</h3>
                        <span class="ai-status analyzing">Scanning metadata...</span>
                    </div>
                    <div class="score-circle" id="total-score-val">0</div>
                    <div class="ai-gauge-container"><div class="ai-gauge-fill" id="score-fill"></div></div>
                    <div id="ai-feedback-box" style="display:none; margin-top:2rem;">
                        <h4 style="margin-bottom:1rem; border-top:1px solid var(--border-color); padding-top:1.5rem;">Coach Feedback</h4>
                        <ul class="tip-list" id="tips-list"></ul>
                        <div class="quick-fix-group">
                            <button class="btn-quick-fix" onclick="recommendContent('title')">Suggest Better Titles</button>
                            <button class="btn-quick-fix" onclick="recommendContent('desc')">Suggest Better Description</button>
                        </div>
                        <div id="recommendation-output" style="margin-top:1.5rem; display:none; background:var(--bg-secondary); padding:1rem; border-radius:12px; font-size:0.9rem; white-space:pre-wrap;"></div>
                    </div>
                </div>
            `;

            setTimeout(() => {
                const score = aiEngine.scoreTitle(title, kws[0] || '');
                const tips = aiEngine.getTips(title, score);

                document.querySelector('.ai-status').className = 'ai-status ready';
                document.querySelector('.ai-status').innerText = 'Audit Complete';
                document.getElementById('total-score-val').innerText = score;
                document.getElementById('score-fill').style.width = `${score}%`;
                
                const fBox = document.getElementById('ai-feedback-box');
                fBox.style.display = 'block';
                document.getElementById('tips-list').innerHTML = tips.map(t => `<li>${t}</li>`).join('');
            }, 500);
        }

        function recommendContent(type) {
            const topic = document.getElementById('video-title').value;
            const output = document.getElementById('recommendation-output');
            output.style.display = 'block';
            
            if (type === 'title') {
                const titles = aiEngine.generateTitles(topic, 'Tutorial', 'balanced', 3);
                output.innerText = "Suggested Titles:\n\n" + titles.join('\n');
            } else {
                output.innerText = "Suggested Description Structure:\n\n1. Keyword-rich hook (first 2 lines)\n2. Video value summary\n3. Timestamps & Related links\n4. Subscribe CTA";
            }
        }

        function extractVideoId(url) {
            const regex = /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/|youtube\.com\/shorts\/|youtube\.com\/live\/)([a-zA-Z0-9_-]{11})/;
            const match = url.match(regex);
            return match ? match[1] : null;
        }

        function loadThumbnail() {
            const url = document.getElementById('video-url').value;
            const videoId = extractVideoId(url);
            const thumbImg = document.getElementById('thumb-img');
            const placeholder = document.getElementById('thumb-placeholder');

            if (!videoId) return alert('Enter valid YouTube URL');

            placeholder.style.display = 'none';
            thumbImg.style.display = 'block';
            thumbImg.src = `https://img.youtube.com/vi/${videoId}/maxresdefault.jpg`;
        }
    </script>
</body>
</html>
